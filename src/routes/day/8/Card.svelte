<script>
    let { card, onclick } = $props();

    let number = $derived(card.number);
    let flip = $derived(card.flip);
    let done = $derived(card.done);
</script>

<!-- svelte-ignore a11y_click_events_have_key_events, a11y_no_static_element_interactions -->
<div
    class="card"
    class:flip
    class:done
    {onclick}
>
    <div
        class="front"
        style:background={`url(https://advent.sveltesociety.dev/data/2023/day-eight/${number}.png) center / contain`}
    ></div>
    <div class="back"></div>
</div>

<style>
    @keyframes donner {
        40% {
            transform: rotateX(180deg) scale(1.2);
        }
        70% {
            transform: rotateX(180deg) scale(1.2);
            rotate: 0deg;
        }
        100% {
            transform: rotateX(180deg);
            rotate: 360deg;
        }
    }

    .card.flip {
        transform: rotateX(180deg);
    }
    .card.done {
        animation: donner 1s ease-in forwards;
    }
    .card.done .front {
        transition: 250ms 750ms filter;
        filter: grayscale(0.75) brightness(0.5);
    }
    
    .card {
        position: relative;
        aspect-ratio: 166/247;
        max-width: 166px;
        /* width: 166px;
        height: 247px; */
        transform-style: preserve-3d;
        transform: perspective(750px);
        transition: 500ms transform;
    }
    .card > div {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 15px;
        backface-visibility: hidden;
    }
    .front {
        transform: rotateX(180deg);
    }
    .back {
        background: whitesmoke url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20634.6%20177.4'%3e%3cpath%20d='M138.2%2023.5c7.9%2011.1%2011%2024.8%208.6%2038.2-1.1%206.3-3.6%2012.3-7.1%2017.7%205.2%209.8%206.9%2021.1%204.9%2032-2.4%2013.1-10.1%2024.6-21.4%2031.7l-41.3%2026.3c-23.5%2015-56.1%208-72.5-15.6-7.9-10.9-11-24.7-8.6-38.1%201.1-6.3%203.6-12.3%207.1-17.7C2.7%2088.2%201%2076.9%203%2066c2.4-13.1%2010.1-24.7%2021.4-31.7L65.7%207.9c23.5-15%2056-8%2072.5%2015.6'%20style='fill:%23ff3e00'/%3e%3cpath%20d='M61.6%20156.2c3-.8%205.8-2%208.4-3.7l41.3-26.3c6.8-4.3%2011.5-11.2%2012.9-19.1%201.4-8-.4-16.3-5.2-23-7.8-11.3-21.9-16.5-35.2-13.1-3%20.8-5.8%202-8.4%203.7l-15.8%2010c-.8.5-1.6.9-2.5%201.1-4%201-8.3-.5-10.6-3.9-1.4-2-2-4.5-1.6-6.9.4-2.4%201.8-4.5%203.9-5.7L90.1%2043c.8-.5%201.6-.9%202.5-1.1%204-1%208.3.5%2010.6%203.9%201.3%201.8%201.9%204%201.7%206.1v1.5c-.1%200%201.4.5%201.4.5%205.8%201.8%2011.3%204.5%2016.2%208.1l2.1%201.6.8-2.4c.4-1.3.7-2.6%201-3.9%201.4-8-.4-16.3-5.2-23C113.4%2023%2099.3%2017.8%2086%2021.2c-3%20.8-5.8%202-8.4%203.7L36.3%2051.2c-6.8%204.3-11.5%2011.2-12.9%2019.1-1.4%208%20.4%2016.3%205.2%2023%207.8%2011.3%2021.9%2016.5%2035.2%2013.1%203-.8%205.8-2%208.4-3.7L88%2092.6c.8-.5%201.6-.9%202.5-1.1%204-1%208.3.5%2010.6%203.9%201.4%202%202%204.5%201.6%206.9-.4%202.4-1.8%204.5-3.9%205.8l-41.3%2026.3c-.8.5-1.6.9-2.5%201.1-4%201-8.3-.5-10.6-3.9-1.3-1.8-1.9-4-1.7-6.1V124c.1%200-1.4-.5-1.4-.5-5.8-1.8-11.3-4.5-16.2-8.1l-2.1-1.6-.8%202.4c-.4%201.3-.7%202.6-1%203.9-1.4%208%20.4%2016.3%205.2%2023%207.8%2011.3%2021.9%2016.5%2035.2%2013.1'%20style='fill:%23fff'/%3e%3cpath%20d='M242%20127.9c-6.2.2-12.3-1.6-17.4-4.9-4.8-3.2-8.4-8-10.2-13.5l10.6-3.9c1.5%203.4%203.9%206.3%206.9%208.4%203.1%202.1%206.8%203.2%2010.5%203.1%203.6.2%207.1-.9%2010-3%202.5-2.1%203.9-5.4%203.7-8.7%200-1.5-.3-3-1-4.4-.6-1.2-1.4-2.3-2.3-3.3-1.2-1.1-2.5-2-4-2.7-1.8-.9-3.3-1.6-4.5-2.1-1.2-.5-2.9-1.1-5.3-1.9-2.9-1-5.1-1.8-6.5-2.4-2-.8-3.9-1.8-5.7-2.9-2-1-3.8-2.4-5.3-4-1.3-1.6-2.4-3.3-3.2-5.3-3.1-7.5-1-16.1%205.1-21.3%204.3-3.8%2010.2-5.7%2017.7-5.7%206.2%200%2011.3%201.4%2015.3%204.1%203.9%202.6%206.7%206.5%208.1%2010.9l-10.4%203.5c-1-2.3-2.8-4.3-5-5.6-2.7-1.5-5.7-2.2-8.8-2.1-3-.2-6%20.7-8.5%202.4-2.1%201.6-3.2%204.1-3.1%206.7%200%202%20.9%203.9%202.4%205.2%201.4%201.4%203.1%202.6%205%203.4%201.7.7%204.4%201.7%207.9%202.9%202.2.8%203.8%201.4%204.8%201.8%201%20.4%202.6%201.1%204.6%202%201.6.7%203.2%201.6%204.7%202.5%201.3%201%202.6%202%203.8%203.1%201.3%201.1%202.4%202.5%203.3%204%20.8%201.5%201.5%203.2%201.9%204.9.6%202%20.8%204.1.8%206.1%200%207.1-2.4%2012.6-7.3%2016.6-4.8%204-11.1%206-18.6%206Zm69.4-1.3-26-75.8h12.1l17.2%2052.9c1%202.8%201.7%205.7%202.4%208.7.6-2.9%201.4-5.8%202.4-8.7l17-52.9h12l-25.9%2075.8h-11.3Zm60.2%200V50.8h47v10.6h-35.8v20.8h23.1v10.6h-23.1V116h38.1v10.6h-49.4Zm78.1%200V50.8H461v65h37.1v10.8h-48.3Zm90.8-65v65h-11.3v-65h-21.5V50.8h54.2v10.8h-21.5Zm44.7%2065V50.8h47v10.6h-35.8v20.8h23.1v10.6h-23.1V116h38.1v10.6h-49.4Z'%20style='fill:%234a4a55'/%3e%3c/svg%3e")
        no-repeat center / 50%;
        outline: 5px solid orangered;
        outline-offset: -15px;
    }
</style>
